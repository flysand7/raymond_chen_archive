<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">The parameters to PostQueuedCompletionStatus are not interpreted</h1>  <!-- .entry-meta -->

<p><a href="http://blogs.msdn.com/larryosterman/"> Larry Osterman</a> mentioned this almost in passing quite a while ago, that <a href="http://blogs.msdn.com/larryosterman/archive/2004/03/29/101329.aspx"> the parameters to <code>PostQueuedCompletionStatus</code> are not interpreted</a> by the operating system. Well, obviously the first parameter, the handle to the completion port, is interpreted as the handle to the completion port. But the other parameters, <code>dwNumberOfBytesTransferred</code>, <code>dwCompletionKey</code>, and <code>lpOverlapped</code> are not interpreted at all. Even though they have names, the names don’t mean anything. Whatever values you pass for those three parameters merely pop out of <code>GetQueuedCompletionStatus</code> when the notification packet makes it to the head of the queue.
 Why do the parameters have names if the names don’t mean anything?
 Because the operating system itself will post notifications to the completion port if you ask it to, and in that case, the values returned by the <code>GetQueuedCompletionStatus</code> function really mean something related to their names. For example, if you issued an asynchronous read to a file that is associated with a completion port, then the <code>dwNumberOfBytesTransferred</code> really is the number of bytes transferred, the <code>dwCompletionKey</code> really is the completion key that you associated with the file handle when you called <code>CreateIoCompletionPort</code>, and the <code>lpOverlapped</code> really is the pointer to the <code>OVERLAPPED</code> structure that you originally issued the read request against.
 But if you call <code>PostQueuedCompletionStatus</code> manually, then you can choose any values you want. Of course, if you’re going to mix operating system-generated completion port activity with manually-generated completion port activity, it would be in your best interest to use the <code>dwCompletionKey</code> (or if you’re really clever, the <code>lpOverlapped</code>) in a consistent manner so that you can tell whether a notification came from the I/O subsystem or was one you generated manually.</p>
<p> But it’s up to you. </p>


</body>