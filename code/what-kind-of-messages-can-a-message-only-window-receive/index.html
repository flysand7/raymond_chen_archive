<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">What kind of messages can a message-only window receive?</h1>  <!-- .entry-meta -->

<p>There’s this thing called a <a href="https://msdn.microsoft.com/en-us/library/ms632599(VS.85).aspx#message_only"><i>message-only window</i></a>, which is a very misleading name because receiving messages is the thing a window spends all its time doing anyway. It’s like calling something a <i>water-only swimming pool</i> or a <i>heat-only oven</i>. </p>
<p>It’s also a very misleading name because it <i>doesn’t</i> receive all messages. “Wait, the name of this window says that the only thing it can do is receive messages, and now you’re saying it can’t do even that!” </p>
<p>The point of a message-only window is that it receives only messages sent or posted specifically to it. You use it to set up a private channel between the sender and the window. After creating a message-only window, you can put messages in the window’s queue by calling <code>Post­Message</code> and passing that window handle, or you can send a non-queued message by calling <code>Send­Message</code> and passing that window handle. </p>
<p>What makes a message-only window interesting is that it doesn’t particpate in broadcast messages. </p>
<p>Many window messages are sent to all top-level windows. <code>WM_</code><code>QUERY­END­SESSION</code>, <code>WM_</code><code>SETTING­CHANGE</code>, <code>WM_</code><code>DDE_</code><code>INITIATE</code>. and anything sent with <code>HWND_</code><code>BROADCAST</code>. These messages don’t reach message-only windows. </p>
<p>Internally, message-only windows are treated as child windows of a system-managed common parent window called <code>HWND_</code><code>MESSAGE</code>. This system-managed common parent window is permanently invisible, which results in message-only windows being permanently invisible. And that’s also how message-only windows are invisible to enumeration and broadcasts: Enumeration and broadcasting is done to top-level windows, but message-only windows are internally treated as child windows of <code>HWND_</code><code>MESSAGE</code> and therefore are not considered top-level. </p>


</body>