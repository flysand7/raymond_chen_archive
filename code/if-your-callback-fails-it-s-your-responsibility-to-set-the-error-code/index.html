<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">If your callback fails, it's your responsibility to set the error code</h1>  <!-- .entry-meta -->

<p>There are many cases where a callback function is allowed to halt an operation. For example, you might decide to return <code>FALSE</code> to <a href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/windowing/windows/windowreference/windowmessages/wm_nccreate.asp"> the <code>WM_NCCREATE</code> message</a> to prevent the window from being created, or you might decide to return <code>FALSE</code> to one of the many enumeration callback functions such as <a href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/windowing/windows/windowreference/windowfunctions/enumwindowsproc.asp"> the <code>EnumWindowsProc</code> callback</a>. When you do this, the enclosing operation will return failure back to its caller: <a href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/windowing/windows/windowreference/windowfunctions/createwindow.asp"> the <code>CreateWindow</code> function</a> returns <code>NULL</code>; <a href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/windowing/windows/windowreference/windowfunctions/enumwindows.asp"> the <code>EnumWindows</code> function</a> returns <code>FALSE</code>.
 Of course, when this happens, the enclosing operation doesn’t know why the callback failed; all it knows is that it failed. Consequently, it can’t set a meaningful value to be retrieved by <a href="http://msdn.microsoft.com/library/en-us/debug/base/getlasterror.asp"> the <code>GetLastError</code> function</a>.
 If you want something meaningful to be returned by the <code>GetLastError</code> function when your callback halts the operation, it’s the callback’s responsibility to set that value by calling <a href="http://msdn.microsoft.com/library/en-us/debug/base/setlasterror.asp"> the <code>SetLastError</code> function</a>.</p>
<p> This is something that is so obvious I didn’t think it needed to be said; it falls into the “because computers aren’t psychic (yet)” category of explanation. But apparently it wasn’t obvious enough, so now I’m saying it. </p>


</body>