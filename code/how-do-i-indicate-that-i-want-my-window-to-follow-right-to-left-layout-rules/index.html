<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">How do I indicate that I want my window to follow right-to-left layout rules?</h1>  <!-- .entry-meta -->

<p>There are many ways, depending on how wide a scope you want.
 If there is one specific window that you want to follow right-to-left layout rules, then you pass the <code>WS_EX_LAYOUT­RTL</code> extended window style when you create the window. This extended style is inherited by child windows, so once you set a top-level window to have right-to-left layout, all child windows will have it, too. To block the <code>WS_EX_LAYOUT­RTL</code> extended style from being inherited by child windows, pass the <code>WS_EX_NO­INHERIT­LAYOUT</code> style when you create the parent window.
 <b>Sidebar</b>: If you’re calling the <code>Message­Box</code> function, then you don’t directly control the styles of the top-level window. But there’s a weird back-channel way to specify that you want the message box dialog to have the <code>WS_EX_LAYOUT­RTL</code> extended style: <a href="http://msdn.microsoft.com/en-us/library/ms645505(VS.85).aspx"> Begin the <code>lpText</code> string with two U+200F characters</a>. Then again, instead of <code>Message­Box</code> you should be using the <code>Task­Dialog­Indirect</code> function which not only lets you customize the text on the buttons, but also lets you pass the <code>TDF_RTL_LAYOUT</code> flag to indicate that you want the dialog to be laid out according to RTL rules. (And as an aid to porting, the <code>Task­Dialog</code> and <code>Task­Dialog­Indirect</code> functions implicitly turn on the <code>TDF_RTL_LAYOUT</code> flag if they find that <code>pszContent</code> is a pointer to a string—not a <code>MAKE­INT­RESOURCE</code>—which begins with two U+200F characters.) <b>End sidebar</b>.¹
 If you want right-to-left layout rules to apply to all top-level windows in your process, you have two choices. You can either do it programmatically or declaratively. (Similar to how you can specify DPI-awareness either <a href="http://msdn.microsoft.com/en-us/library/ms633543.aspx"> programmatically or declaratively</a>.)
 The programmatic way is to call <a href="http://msdn.microsoft.com/en-us/library/ms633543.aspx"> <code>Set­Process­Default­Layout(LAYOUT_RTL)</code></a> from your application. The declarative way is to  <a href="http://msdn.microsoft.com/en-us/goglobal/bb688119.aspx#EDC"> insert two left-to-right marks (U+200E) at the beginning of the <i>File­Description</i> version resource string of the executable</a>.
 Note that the caveats which apply to changing the process DPI awareness programmatically also apply to changing the default process layout programmatically: Code which calls <code>Get­Process­Default­Layout</code> will see the default at the time of the call, even if some code later on calls <code>Set­Process­Default­Layout</code> to change it.
 Note also that it really is the application’s call whether its default layout is left-to-right or right-to-left. A DLL shouldn’t decide on its own to change the process default layout, at least not without coöperation from that process. If you are a DLL and you want to create a specific window with right-to-left layout, you should use the <code>WS_EX_LAYOUT­RTL</code> method so that your decision applies only to your DLL’s windows. (Otherwise you’re <a href="http://blogs.msdn.com/b/oldnewthing/archive/2008/12/11/9193695.aspx"> using a global setting to manage a local problem</a>.)
 <b>Bonus chatter</b>: Why isn’t the default layout specified in the manifest like DPI-awareness? Because RTL support was added in Windows 2000, which predated application manifests by several years. If the feature were invented today, the manifest would be a much better place for declaring it.
 <b>Update</b>
 ¹ Commenter SCB pointed out that there is indeed a flag to specify that you want RTL layout on your message box: <code>MB_RTLREADING</code>. If that flag exists, then why also have the U+200F back-channel?</p>
<p> Answer: So that translators can mark a string as requiring RTL treatment without having to go back and make code changes. </p>


</body>