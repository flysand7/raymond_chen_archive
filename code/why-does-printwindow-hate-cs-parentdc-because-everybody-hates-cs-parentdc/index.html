<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">Why does PrintWindow hate CS_PARENTDC? Because EVERYBODY hates CS_PARENTDC!</h1>  <!-- .entry-meta -->

<p>Commenter kero wants to know <a href="http://blogs.msdn.com/b/oldnewthing/archive/2010/07/20/10040074.aspx#10040920"> why the <code>Print­Window</code> function hates <code>CS_PARENT­DC</code></a>. (And <code>CS_CLASS­DC</code>, and <code>CS_OWN­DC</code>.)
 Because <i>everybody</i> hates <code>CS_PARENT­DC</code>! (And <code>CS_CLASS­DC</code>, and <code>CS_OWN­DC</code>.)
 We saw earlier that these class styles <a href="http://blogs.msdn.com/b/oldnewthing/archive/2006/06/01/612970.aspx"> violate widely-held assumptions about how drawing works</a>. I mean, who would have thought that asking for two device contexts would give you the same one back twice? Or that changes to one device context would secretly modify another (because they’re really the same)? Or that a window procedure assumes that it will see only one device context <i>ever</i>?
 The <code>Print­Window</code> function is really in a pickle when faced with a window with one of these class styles, because the whole point of <code>Print­Window</code> is to render into some <i>other</i> device context. The <code>Print­Window</code> function says “Render into this other device context, please,” and the window acts like a bratty two-year-old who refuses to eat food from anything other than his favorite <a href="http://www.bing.com/shopping/search?q=monkey+plate"> monkey plate</a>. “This is not my monkey plate. I will now throw a tantrum.”
 The <code>Print­Window</code> function passes a custom device context as a parameter to the <code>WM_PRINT</code> message, and the window says, “Hey, no fair! My class styles say that you aren’t allowed to pass any old device context; you have to pass <i>mine</i>. I will now take my broccoli and mash it all over the table.”
 Oh well. At least it tried.</p>
<p> Yet another reason to avoid these weird class styles. </p>


</body>