<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">You’d think that with the name TEMP, people wouldn’t expect it to be around for a long time</h1>  <!-- .entry-meta -->

<p>A customer had a problem with the Disk Cleanup wizard. The customer liaison explained: </p>
<blockquote class="q"><p>The customer would like to know what locations the Disk Cleanup wizard removes files from. The custom is running Application Q. They had a previous incident where they incurred significant downtime because the Disk Cleanup wizard deleted files from <code>C:\Windows\Installer</code> and <code>C:\Temp</code> that caused their application to stop working. When will the Disk Cleanup Wizard <a href="http://support.microsoft.com/kb/2852386">remove a Windows update</a>? </p></blockquote>
<p>Okay, we can talk about how the cleanup of outdated Windows updates works, but <i>holy crap</i> did you say that Application Q stores critical information in the <code>C:\Temp</code> directory? </p>
<p>You cannot assume that any files in the Temp directory will exist for any significant length of time. The name Temp stands for Temporary. Temporary means <i>not permanent</i>. If your application puts critical files in the Temp directory, then it is just asking for trouble. </p>
<p>If you need a permanent place to store your critical information, try a subdirectory of the <a href="http://blogs.msdn.com/b/cjacks/archive/2008/02/05/where-should-i-write-program-data-instead-of-program-files.aspx">Local Application Data</a> directory. </p>
<p>Okay, going back to the questions about Windows updates: The Disk Cleanup Wizard removes up a Windows update if it has been superseded by another update. For example, there may be a roll-up update that includes the original update. </p>
<p>But I doubt that’s what made Application Q stop working. I bet it’s assuming that files in a temporary directory have permanent storage duration. </p>


</body>