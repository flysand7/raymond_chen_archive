<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">String comparisons against program output is not usually the best solution</h1>  <!-- .entry-meta -->

<p>A customer wanted to know whether the <code>ICACLS</code> program will be deprecated in Windows 10. </p>
<p>The reason is that they have a program that modifies file and directory permission, and the way it works is that the program runs the <code>ICACLS</code> program, then parses the output to see whether it succeeded. They are working on a new release and wanted to know what APIs they should be using, and whether their existing technique was still going to work. </p>
<p>As a general rule, programs are designed for human consumption, not programmatic consumption. (There are exceptions, like <code>sort</code>, or reporting tools that are designed to have their output parsed.) But if you’re going to be tied to the exact number of spaces between the date and the file size, or the user’s date and number formatting settings, or the letters A-c-c-e-s-s and d-e-n-i-e-d. then you’re going to run into trouble. </p>
<p>If you’re going to be manipulating file security, then you should be using functions like <code>Set­Named­Security­Info</code>, which are part of the formal and documented API surface of Windows. </p>
<p>I found this question surprising because it came from a German customer, so they were presumably doing string comparisons against “<span lang="de">Zugriff verweigert</span>“, and all their customers were in German-speaking countries. Either that, or they told their customers to install the English version of Windows. </p>
<p><b>Bonus chatter</b>: One of my colleagues recommends <a href="http://www.amazon.com/Programming-Windows-Security-Keith-Brown/dp/0201604426?tag=tholneth-20"><i>Programming Windows Security</i></a> for those who want to understand more on the topic. Just passing along the recommendation; I haven’t read the book myself. </p>


</body>