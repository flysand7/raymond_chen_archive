<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">Is there a 2048 character limit for OFN_ALLOWMULTISELECT in MFC or isn't there?</h1>  <!-- .entry-meta -->

<p><a href="http://msdn.microsoft.com/library/dk77e5e7(VS.80).aspx"> The MFC documentation for <code>CFile­Dialog</code></a> contains the following strange warning:</p>
<blockquote class="q"><p> When the user allocates their own buffer to accommodate <code>OFN_ALLOW­MULTI­SELECT</code>, the buffer can’t be larger than 2048 or else everything gets corrupted (2048 is the maximum size). </p></blockquote>
<p> The sudden informality of the phrase “or else everything gets corrupted” is surprising but also sounds vaguely familiar to me. I think I was the one who wrote that phrase over a decade ago as part of my investigation into a defect in the common dialog functions. Somebody must have forwarded my analysis to the MFC documentation team (since the problem was originally in an MFC application), who just copied and pasted it into the official documentation.
 The limitation in question existed in Windows 95 and was fixed in Windows NT 4 and Windows 98, so the remarks do not apply to any modern version of Windows.
 What struck me is that the MFC documentation picked up this limitation rather than deferring to the Platform SDK team to document the issue. It means that when the bug is fixed in the platform, the MFC documentation becomes wrong.</p>
<p> The limitation is not mentioned in the <a href="http://msdn.microsoft.com/library/dk77e5e7(VS.90).aspx"> Visual Studio 2008 version of the <code>CFile­Dialog</code> documentation</a>, which suggests either that the Visual Studio folks deferred documenting the issue to the Platform SDK team, or they somehow figured out that the issue no longer applied and removed the offending text. </p>


</body>