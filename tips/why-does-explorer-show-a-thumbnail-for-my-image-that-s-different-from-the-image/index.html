<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">Why does Explorer show a thumbnail for my image that's different from the image?</h1>  <!-- .entry-meta -->

<p>A customer (via a <a href="http://blogs.msdn.com/oldnewthing/archive/2009/02/16/9425124.aspx"> customer liaison</a>) reported that Explorer somestimes showed a thumbnail for an image file that didn’t exactly match the image itself.</p>
<blockquote class="q"><p> I have an image that consists of a collage of other images. When I switch Explorer to <i>Extra Large Icons</i> mode, the thumbnail is a miniature representation of the image file. But in <i>Large Icons</i> and <i>Medium Icons</i> mode, the thumbnail image shows only one of the images in the collage. I’ve tried deleting the thumbnail cache, but that didn’t help; Explorer still shows the wrong thumbnails for the smaller icon modes. What is wrong? </p></blockquote>
<p> The customer provided screenshots demonstrating the problem, but the customer did not provide the image files themselves that were exhibiting the problem. I therefore was reduced to using my psychic powers.</p>
<blockquote class="m"><p> My psychic powers tell me that your JPG file has the single-item image as the camera-provided thumbnail. The shell will use the camera-provided thumbnail if suitable. </p></blockquote>
<p> The customer liaison replied,</p>
<blockquote class="q"><p> The customer tells me that the problem began happening after they edited the images. Attached is one of the images that’s demonstrating the problem. </p></blockquote>
<p> Some image types (most notable TIFF and JPEG) support the EXIF format for encoding image metadata. This metadata includes information such as the model of camera used to take the picture, the date the picture was taken, and various camera settings related to the photograph. But the one that’s interesting today is the image thumbnail.
 When Explorer wants to display a thumbnail for an image, it first checks whether the image comes with a precalculated thumbnail. If so, and the thumbnail is at least as large as the thumbnail Explorer wants to show, then Explorer will use the image-provided thumbnail instead of creating its own from scratch. If the thumbnail embeded in the image is wrong, then when Explorer displays the image-provided thumbnail, the result will be incorrect. Explorer has no idea that the image is lying to it.
 Note that the decision whether to use the image-provided thumbnail is not based solely on the view. (In other words, the conclusion is not “Explorer uses the image-provided thumbnail for <i>Large Icons</i> and <i>Medium Icons</i> but ignores it for <i>Extra Large Icons</i>.) The decision is based on both the view and the size of the image-provided thumbnail. If the image-provided thumbnail is at least the size of the view, then Explorer will use it. For example, if your view is set to 64 × 64 thumbnails, then the image-provided thumbnail will be used if it is at least 64 × 64.</p>
<p> The <a href="http://en.wikipedia.org/wiki/Exchangeable_image_file_format"> Wikipedia page on EXIF</a> points out that “Photo manipulation software sometimes fails to update the embedded information after an editing operation.” It appears that some major image editing software packages fail to update the EXIF thumbnail when an image is edited, which can result in <a href="http://replay.web.archive.org/20090226122006/http://netzreport.googlepages.com/hidden_data_in_jpeg_files.html"> inadvertent information disclosure</a>: If the image was cropped or otherwise altered to remove information, the information may still linger in the thumbnail. <a href="http://blogs.23.nu/disLEXia/2004/12/antville-5751/"> This Web site has a small gallery of examples</a>. </p>


</body>