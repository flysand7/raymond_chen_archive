<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">One-line batch script to delete empty directories</h1>  <!-- .entry-meta -->

<p>
<a href="http://www.lockergnome.com/nexus/windows/2007/02/20/empty-folder-nuker-v120/">
You don’t need a whole 260KB program to do it</a>.
This batch file does the trick just fine:
</p>
<pre>
for /f "usebackq" %%d in (`"dir /ad/b/s | sort /R"`) do rd "%%d"
</pre>
<p>
I call it <code>rdempty.cmd</code>.
</p>
<p>
This is the long-forgotten follow-up to
<a href="http://blogs.msdn.com/oldnewthing/archive/2007/05/11/2532913.aspx#2571579">
Performing an operation in each subdirectory of a directory tree
from batch</a>.
We’re using the same technique as in that article,
but pumping the result through “<code>| sort /R</code>”
to reverse the order of the enumeration so we enumerate
the directories bottom-up rather than top-down.
This is important for deleting empty directories
because you have to remove the subdirectories before
you remove the parent.
</p>
<p>
<b>Disclaimer</b>:
I doubt anybody actually enjoys working with batch files,
but that doesn’t mean that tips on using it more effectively
aren’t valid.
If you would rather gouge your eyes out than use the confusing
command prompt batch language,
then you are more than welcome to use
the scripting language of your choice instead.
At no point in this article am I saying that this is the only way
or the best way to do it.
But it’s definitely smaller than a 260KB program.</p>


</body>