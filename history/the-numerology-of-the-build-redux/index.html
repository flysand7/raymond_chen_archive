<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">The numerology of the build, redux</h1>  <!-- .entry-meta -->

<p>I noted some time ago that starting in Windows Vista, <a href="https://technet.microsoft.com/en-us/magazine/jj663498.aspx">final build numbers must be a multiple of 16</a>. Why is that? </p>
<p>The version number comes in four parts, each consisting of a 16-bit integer: major.minor.build.revision. The major and minor numbers correspond to the programmatic operating system version. For example, <a href="http://blogs.msdn.com/b/oldnewthing/archive/2013/05/07/10416464.aspx">poseurs refer to Windows 7 as version 6.1</a>. because its programmatic major version is 6 and its programmatic minor version is 1. Nobody at Microsoft calls it that; we just call it Windows 7. </p>
<p>The build number generally increases by one each time the build lab <a href="http://blogs.msdn.com/b/oldnewthing/archive/2013/11/12/10466467.aspx">spins up</a> a build, although there are occasional jumps and gaps, <a href="https://technet.microsoft.com/en-us/magazine/jj663498.aspx">as I noted in the linked article</a>. </p>
<p>The revision number is under the control of the servicing team. And here’s what they needed to encode: </p>
<ul>
<li>Four bits for the service pack number,     where zero represents RTM. 
<li>One bit to indicate whether this is a non-milestone build.     (And no, I don’t know what that means.) 
<li>One bit to indicate whether this is a build intended to be released     to the public. 
<li>Two bits to indicate which release track the build is from.     <a href="http://blogs.msdn.com/b/windowsvistanow/archive/2008/03/11/what-is-the-difference-between-general-distribution-and-limited-distribution-releases.aspx">    0 = GDR, 1 = LDR</a>, 2 = (unused), 3 = private build. 
<li>Twelve bits to encode the servicing build number.¹ </li></li></li></li></li></ul>
<p>Add this all up and you’ll see that this requires 20 bits. But the revision field is only 16 bits wide. Therefore, the servicing team needs to find 4 additional bits somewhere, and by requiring that the RTM build number be a multiple of 16, they get their extra four bits. </p>
<p>One of the changes to the servicing stack in Windows 10 is that the servicing team redesigned their version numbering system so that they need only 16 bits of information rather than 20. I don’t know the details of how they accomplished it; all I know is that they no longer need to reserve the bottom four bits of the build number. In other words, the build number no longer needs to be a multiple of 16. </p>
<p>Most people in the Windows division were unaware of this change to the servicing stack. When the announcement came down that the release management team were hoping that build 10584 would be the final build for the November 2015 update, many people didn’t believe it. “That can’t be the final build. It’s not a multiple of 16!”² </p>
<p>¹ The fact that this provides enough daily builds to cover the five-year mainstream support lifecycle is probably not a coincidence. </p>
<p>² Yes, the actual final build for the November 2015 update is 10586. I guess the release management team decided to take two more fixes. </p>


</body>