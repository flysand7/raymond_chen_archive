<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">Why is a drive letter permitted in front of UNC paths (sometimes)?</h1>  <!-- .entry-meta -->

<p><p>
A little-known quirk is that the file system accepts and ignores
a drive letter in front of a UNC path.
For example, if you have a directory called
<code>\\server\share\directory</code>, you can say
</p>
<pre>
dir P:\\server\share\directory
</pre>
and the directory will be listed to the screen.
The leading <code>P:</code> is ignored.
</p>
<p>
Why is that?
</p>
<p>
Rewind to 1984 and the upcoming release of MS-DOS 3.1,
which added networking support.
Up to this point, all fully-qualified file specifications
consisted of three components:
A drive letter, a path, and a file name.
Many programs relied on this breakdown and did things like
“helpfully” prepend a drive letter if it looks like you
“forgot” one.
For example, if you told it to save the results to
<code>\\server\share\file.txt</code> it would say,
“Oh dear, that’s not good, the user forgot the drive letter!
I’ll put the current drive in front to make things better,”
resulting in
<code>C:\\server\share\file.txt</code>.
Other programs would prompt you with
“Please enter a drive letter”,
and you couldn’t say “No, there’s no drive letter, just
take the path and use it.”
They insisted on a drive letter,
and you darn sure better give them one.
</p>
<p>
(Compare the Unix programs that “helpfully” rewrite
<code>//server/volume/file</code> as
<code>/server/volume/file</code> because they “know”
that consecutive slashes collapse,
unaware of the special exception for two leading slashes.)
</p>
<p>
In order to retain compatibility with programs that
provided this sort of “unwanted help”,
the designers of the networking support in MS-DOS
decided to allow the strange syntax <code>C:\\server\share\directory</code>
and treat it as if the drive letter simply weren’t there.
Some (but not all) of this quirk of path parsing persists today.
</p>
<p>
[Raymond is currently away; this message was pre-recorded.]
</p>


</body>