<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">Importance of alignment even on x86 machines, part 2</h1>  <!-- .entry-meta -->

<p>The various Interlocked functions (InterlockedIncrement, and so on) require that the variable being updated be properly aligned, even on x86, a platform where the CPU silently fixes unaligned memory access invisibly.</p>
<p> If you pass an unaligned pointer to one of the Interlocked functions, the operation will still succeed, but the result won’t be atomic.  Another processor may see a partially-completed update. </p>
<p> This is a particularly insidious bug since it happens only on multiprocessor machines under very tight timing conditions. You will be hard-pressed to reproduce this in the laboratory. </p>
<p> (A commenter <a href="http://blogs.msdn.com/oldnewthing/archive/2004/08/27/221486.aspx#221771"> stole my thunder and remarked on it yesterday</a>.) </p>
<p> Moral of the story: Same as yesterday.  Mind your alignment. </p>


</body>