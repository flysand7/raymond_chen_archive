<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">What if two programs did this? Practical exam</h1>  <!-- .entry-meta -->

<p> A customer who doesn’t read this blog had the following question: </p>
<blockquote class="q">
<p> The requirement for our application is that it must be on top of all other windows, even in the presence of other windows with the topmost style. In our <code>WM_KILLFOCUS</code> and <code>WM_PAINT</code> messages, we set ourselves to topmost, and then call <code>SetWindowPos</code> to bring ourselves to the front, and then we <code>SetForegroundWindow</code> ourselves just to make sure. </p>
<p> The result is that our application and another application end up fighting back and forth because both applications are applying similar logic to remain on top. There are other applications that defeat our logic, and they manage to cover our application. (These other applications are third party applications we have no control over.)  </p>
<p> We are in the process of writing a DLL to hook all messages for all windows and [even crazier things that aren’t worth elaborating on], but at the moment this causes the other hooked applciations to crash. We are also considering setting a timer and calling <code>SetWindowPos</code> when the timer fires, but that seems inefficient. </p>
</blockquote>
<p> The customer didn’t even have to run through the thought experiment <a href="http://blogs.msdn.com/oldnewthing/archive/2005/06/07/426294.aspx"> What if two programs did this?</a>; they got to run it in real life! And the result was as predicted: The two programs fight with each other to be the one that is on top of the other. Nobody wins; everybody loses, especially the user. </p>


</body>