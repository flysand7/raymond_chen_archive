<body style=max-width:80ch;margin:auto>
<h1 class="entry-title" style="margin-bottom:15px;">Myth: PAE increases the virtual address space beyond 4GB</h1>  <!-- .entry-meta -->

<p>This is another non sequitur. PAE increases the amount of physical memory that can be addressed by the processor, but that is unrelated to virtual address space. (Remember that PAE stands for <a href="http://support.microsoft.com/?kbid=268363"> Physical Address Extensions</a>.)
 PAE increases the physical address space (the address space that the CPU can use to access the memory chips on your computer) from 32 bits to 36 on a Pentium 2, for a theoretical maximum physical memory capacity of 64GB. However, the size of a pointer variable hasn’t changed. It’s still 32 bits (for a 32-bit processor), which means that the virtual address space is still 4GB.
 With PAE enabled, the page table and page directory entries double in size (to accomodate the additional bits in the page frame), which significantly increases the amount of memory required for page tables and page directories (since each page table describes only half as much memory as it used to).
 Notice that this has as a consequence that <a href="http://msdn.microsoft.com/library/en-us/memory/base/physical_address_extension.asp"> PAE and /3GB conflict with each other</a> to some degree. If you turn on both PAE and /3GB, then the kernel will limit itself to 16GB of physical memory. That’s because <a href="http://blogs.msdn.com/oldnewthing/archive/2004/08/06/209840.aspx"> there isn’t enough address space in the kernel to fit all the necessary memory bookkeeping into the 1GB of memory you told the kernel to squeeze itself into</a>.</p>
<p> (On an AMD processor, the physical address space expands to 40 bits, for a theoretical maximum of 1TB.  However, the memory manager uses only 37 of those bits, for an actual maximum of 128GB.  Why? For the same reason that the kernel limits itself to 16GB in /3GB mode: Not enough address space. It’s time to move to 64-bit processors…) </p>


</body>